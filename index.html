<html>
    <script src='http://maps.google.com/maps/api/js?sensor=true' type='text/javascript'></script>
    <script src='http://code.jquery.com/jquery-1.6.4.min.js' type='text/javascript'></script>


<script>

        var myLatLng;
        var map;
        var marker;
        var myOptions;
        var c;
        var ctx;
        
		// Initialize canvas
		function init(){
			c = document.getElementById('graph');
			ctx = c.getContext('2d');
		}
		
		// Draw map

		$(function(){
			navigator.geolocation.getCurrentPosition(function(geodata) {
			$(".latitude").html(geodata.coords.latitude);
			$(".longitude").html(geodata.coords.longitude);
			});
		})



		// Add listener for orientation
		window.addEventListener("deviceorientation", function(event){
			$(".alpha").html(event.alpha);
			$(".beta").html(event.beta);
			$(".gamma").html(event.gamma);
			w = document.getElementById("graph").width;
			h = document.getElementById("graph").height;
			arrow(w*event.gamma, h*event.beta, ctx, w, h);

		}, false);

		function arrow(x, y,ctx,w,h) {
 			ctx.clearRect(0, 0, w, h); 
 			ctx.beginPath(); 
 			ctx.moveTo(w / 2, h / 2); 
 			ctx.lineTo(w / 2 + x, h / 2 + y); 
 			ctx.stroke(); 
		}

</script>

<body onload="init()">
	<strong>Location</strong>
    <br />
    latitude:
    <span class='latitude'></span>
    <br />
    longitude:
    <span class='longitude'></span><br>
    <canvas id="graph" width="796" height="400"></canvas>
    <span class="alpha"></span>
    <span class="beta"></span>
    <span class="gamma"></span>

</body>


</html>

